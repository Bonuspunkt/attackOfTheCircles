!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return new Promise(function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var o=Date.now();r.decodeAudioData(i.response,function(n){console.log(t,Date.now()-o);var i=r.createBufferSource();i.buffer=n,e(i)},n)},i.send()})}function o(){h.height=window.innerHeight,h.width=window.innerWidth;var t=Math.min(window.innerHeight,window.innerWidth),e=t/640;l.scale(e,e)}var r=new AudioContext,s=r.createGain(),a=r.createGain(),u=r.createGain();s.connect(u),a.connect(u),u.connect(r.destination);var c=["tracks/onlymeith_-_1033.mp3","tracks/grapes_-_I_dunno.mp3"],p=void 0;Promise.all(c.map(i)).then(function(t){t.forEach(function(t){return t.connect(a)}),p=t}).then(function(){var t=p[0];t.loop=!0,t.start(0)});var h=document.querySelector("canvas"),l=h.getContext("2d");window.addEventListener("resize",o),o();var f=n(1);new f(l).start()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(2),s=function(){function t(e){i(this,t),this.context=e,this.scene=new r}return o(t,[{key:"start",value:function(){var t=this;requestAnimationFrame(function(e){return t.run(e)})}},{key:"run",value:function(t){var e=this;this.lastTimestamp||(this.lastTimestamp=t);var n=t-this.lastTimestamp;this.scene.update(n,t),this.scene.render(this.context),requestAnimationFrame(function(t){return e.run(t)}),this.lastTimestamp=t}}]),t}();t.exports=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(3),s=n(7),a=n(8),u=(n(6).viewBox,function(){function t(){var e=this;i(this,t);var n=new r(0);n.on("shoot",function(){var t=new s(n.position,n.direction);e.rockets.push(t),t.on("dead",function(){return e.rockets=e.rockets.filter(function(e){return e!==t})})}),this.players=[n],this.enemies=[],this.rockets=[],this.spawner=new a(n),this.spawner.on("spawn",function(t){return e.enemies.push(t)}),this.players=[n]}return o(t,[{key:"update",value:function(t,e){var n=this;t=Math.min(t,1e3),this.spawner.update(t,e),this.players.forEach(function(n){return n.update(t,e)}),this.enemies.forEach(function(n){return n.update(t,e)}),this.rockets.forEach(function(n){return n.update(t,e)});var i=this.enemies.filter(function(t){return n.rockets.some(function(e){return t.position.distance(e.position)<10})});i.forEach(function(t){return n.enemies=n.enemies.filter(function(e){return e!==t})}),this.enemies.some(function(t){return t.position.distance(n.players[0].position)<16})&&console.log("dead")}},{key:"render",value:function(t){t.clearRect(0,0,1e6,1e6),t.beginPath(),t.rect(0,0,640,640),t.strokeStyle="#000",t.stroke(),this.enemies.forEach(function(e){return e.draw(t)}),this.players.forEach(function(e){return e.draw(t)}),this.rockets.forEach(function(e){return e.draw(t)})}}]),t}());t.exports=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(){return navigator.getGamepads&&navigator.getGamepads()||navigator.webkitGetGamepads&&navigator.webkitGetGamepads()}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(4),c=n(5),p=n(6),h=p.viewBox.width,l=p.viewBox.height,f=p.player,y=f.size,d=f.speed,v=f.aimSpeed,w=f.shootInterval,b=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n.position=new c(h/2,l/2),n.direction=new c(1,0),n.gamepadIndex=t,n.lastShot=0,n}return r(e,t),a(e,[{key:"update",value:function(t,e){var n=s()[this.gamepadIndex];if(n){if(this.aim=n.buttons[6].pressed,Math.abs(n.axes[0])>.15||Math.abs(n.axes[1])>.15){var i=new c(n.axes[0],n.axes[1]).multiply(this.aim?v:d);this.position.add(i.multiply(t))}(Math.abs(n.axes[2])>.2||Math.abs(n.axes[3])>.2)&&(this.angle=Math.atan2(n.axes[3],n.axes[2]),this.direction.x=n.axes[2],this.direction.y=n.axes[3],this.direction.normalize()),n.buttons[7].pressed&&this.canShot(e)&&this.emit("shoot")}}},{key:"canShot",value:function(t){return this.lastShot<t-w?(this.lastShot=t,!0):!1}},{key:"draw",value:function(t){var e=this.position.x,n=this.position.y,i=y/2;t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fillStyle="#000",t.fill(),t.closePath(),this.aim&&(t.beginPath(),t.moveTo(this.position.x,this.position.y),t.lineTo(e+1e6*this.direction.x,n+1e6*this.direction.y),t.strokeStyle="rgba(255,0,0, 0.25)",t.stroke(),t.closePath())}}]),e}(u);t.exports=b},function(t,e){"use strict";function n(){this.events={}}n.prototype.addEventListener=function(t,e){t=String(t).toLowerCase(),this.events[t]=this.events[t]||[],this.events[t].push(e)},n.prototype.on=n.prototype.addEventListener,n.prototype.removeEventListener=function(t,e){t=String(t).toLowerCase();var n=this.events[t]||[],i=n.indexOf(e);return-1===i?!1:(n.splice(i,1),!0)},n.prototype.un=n.prototype.removeEventListener,n.prototype.off=n.prototype.removeEventListener,n.prototype.fireEvent=function(t){t=String(t).toLowerCase();var e=[].slice.call(arguments,1),n=(this.events[t]||[]).slice();n.forEach(function(t){t.apply(this,e)},this)},n.prototype.emit=n.prototype.fireEvent,n.prototype.once=function(t,e){t=String(t).toLowerCase();var n=function(){this.un(t,n),e.apply(this,arguments)}.bind(this);this.on(t,n)},t.exports=n},function(t,e){"use strict";function n(t,e){"undefined"==typeof e&&(e=t),this.x=t,this.y=e}n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.distance=function(t){return Math.sqrt(this.distanceSquared(t))},n.prototype.distanceSquared=function(t){return this.clone().substract(t).lengthSquared()},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.length=function(){return Math.sqrt(this.lengthSquared())},n.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},n.prototype.max=function(t){return new n(this.x>t.x?this.x:t.x,this.y>t.y?this.y:t.y)},n.prototype.min=function(t){return new n(this.x<t.x?this.x:t.x,this.y<t.y?this.y:t.y)},n.prototype.multiply=function(t){return"number"==typeof t?(this.x*=t,this.y*=t):(this.x+=t.x,this.y+=t.y),this},n.prototype.negate=function(){return this.x*=-1,this.y*=-1,this},n.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,this},n.prototype.substract=function(t){return this.add(t.clone().multiply(-1)),this},n.prototype.clone=function(){return new n(this.x,this.y)},Object.defineProperties(n,{one:{get:function(){return new n(1,1)}},zero:{get:function(){return new n(0,0)}},unitX:{get:function(){return new n(1,0)}},unitY:{get:function(){return new n(0,1)}}}),t.exports=n},function(t,e){"use strict";t.exports={viewBox:{width:640,height:640},player:{size:16,speed:.12,aimSpeed:.08,shootInterval:500},rocket:{size:4,speed:.25,lifetime:1500},spawner:{minDistance:50,interval:500},follower:{color:{r:0,g:180,b:0},size:16,speed:.1,spawnSleep:500},dasher:{color:{r:180,g:0,b:0},size:16,vMax:12,spawnSleep:500,chargeTime:1e3,dashTime:750,slowdown:.9},whirrer:{color:{r:0,g:0,b:180},size:16,speed:.1,spawnSleep:500,radius:16,rotationSpeed:.01}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),u=n(6),c=u.rocket,p=c.size,h=c.speed,l=c.lifetime,f=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.position=t.clone(),r.move=n.clone().multiply(h),r}return r(e,t),s(e,[{key:"update",value:function(t,e){this.start||(this.start=e),e-this.start>l?this.emit("dead"):this.position.add(this.move.clone().multiply(t))}},{key:"draw",value:function(t){var e=this.position.x,n=this.position.y,i=p/2;t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fillStyle="#f00",t.fill(),t.closePath()}}]),e}(a);t.exports=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),u=n(5),c=n(9),p=n(11),h=n(12),l=n(6),f=l.viewBox,y=f.width,d=f.height,v=l.spawner,w=v.interval,b=v.minDistance,m=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n.player=t,n.lastSpawn=0,n}return r(e,t),s(e,[{key:"update",value:function(t,e){if(!(this.lastSpawn+w>e)){var n=Math.random()-.5,i=Math.random()-.5;n=n*y+(0>n?-1:1)*b+this.player.position.x,i=i*d+(0>i?-1:1)*b+this.player.position.y;var o=new u(n,i),r=Math.random(),s=void 0;s=.1>r?h:r>.8?p:c;var a=new s(this.player,o);this.emit("spawn",a),this.lastSpawn=e}}}]),e}(a);t.exports=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),u=n(10),c=n(6),p=c.follower,h=p.size,l=p.speed,f=p.spawnSleep,y=p.color,d=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.player=t,r.position=n,r}return r(e,t),s(e,[{key:"update",value:function(t,e){if(this.spawn||(this.spawn=e),this.active=Math.min((e-this.spawn)/f,1),1===this.active){var n=this.player.position.clone().substract(this.position).normalize();this.position.add(n.multiply(l*t))}}},{key:"draw",value:function(t){var e=this.position.x,n=this.position.y,i=h/2,o=u.getRGBA(y,this.active||0);t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fillStyle=o,t.fill(),t.closePath()}}]),e}(a);t.exports=d},function(t,e){"use strict";function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}t.exports={inherits:function(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t,writeable:!0,configurable:!0}})},getRGBA:function(){var t,e;return"object"===n(arguments[0])?(t=arguments[0],e=arguments[1]):(t={r:arguments[0],b:arguments[1],g:arguments[2]},e=arguments[3]),["rgba(",t.r||0,",",t.g||0,",",t.b||0,",",e,")"].join("")}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),u=n(5),c=n(10),p=n(6),h=p.dasher,l=h.size,f=h.vMax,y=h.spawnSleep,d=h.color,v=h.chargeTime,w=h.dashTime,b=h.slowdown,m=1,g=2,x=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.player=t,r.position=n,r}return r(e,t),s(e,[{key:"update",value:function(t,e){this.spawn||(this.spawn=e),this.active=Math.min((e-this.spawn)/y,1);var n=(e-this.spawn)%(v+w),i=v>n?m:g;if(i!==this.state)switch(i){case m:this.velocity=u.zero;break;case g:this.velocity=this.player.position.clone().substract(this.position).normalize().multiply(f)}switch(this.state=i,this.state){case m:this.colorFactor=.2+.8*n/w;break;case g:this.colorFactor=1-.8*n/(v+w)}1===this.active&&this.position.add(this.velocity.multiply(b))}},{key:"draw",value:function(t){var e=this.position.x,n=this.position.y,i=l/2,o=c.getRGBA(Math.round(d.r*this.colorFactor),Math.round(d.g*this.colorFactor),Math.round(d.b*this.colorFactor),this.active||0);t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fillStyle=o,t.fill(),t.closePath()}}]),e}(a);t.exports=x},function(t,e,n){"use strict";function i(t,e){o.call(this),this.player=t,this.basePosition=e;var n=this.basePosition.clone().substract(this.player.position).normalize().multiply(f);this.position=this.basePosition.clone().add(n),this.rotation=Math.atan2(n.y,n.x)}var o=n(4),r=n(10),s=n(5),a=n(6),u=a.whirrer,c=u.size,p=u.speed,h=u.spawnSleep,l=u.color,f=u.radius,y=u.rotationSpeed;r.inherits(i,o),i.prototype.update=function(t,e){if(this.spawn||(this.spawn=e),this.active=Math.min((e-this.spawn)/h,1),1===this.active){var n=this.player.position.clone().substract(this.basePosition).normalize();this.basePosition.add(n.multiply(p*t))}this.rotation=(e-this.spawn)*y%(2*Math.PI);var i=new s(Math.sin(this.rotation),Math.cos(this.rotation)).multiply(f);this.position=this.basePosition.clone().add(i)},i.prototype.draw=function(t){var e=this.position.x,n=this.position.y,i=c/2,o=r.getRGBA(l,this.active||0);t.beginPath(),t.arc(e,n,i,0,2*Math.PI),t.fillStyle=o,t.fill(),t.closePath()},t.exports=i}]);